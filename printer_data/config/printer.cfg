
[include mainsail.cfg]
[include macros/*.cfg]
[include system/*.cfg]


# [gcode_controller]
# command_timeout: 0.5 

[printer]
kinematics: corexy
max_velocity: 300
max_accel:    4000
max_z_velocity: 25
max_z_accel: 300
square_corner_velocity: 5 #6 #7.0 #8.0

[virtual_sdcard]
path: ~/printer_data/gcodes
on_error_gcode: CANCEL_PRINT

[mcu] #Manta
canbus_uuid: c8a4470807a5

[mcu CB1]
serial: /tmp/klipper_host_mcu

[force_move]
enable_force_move: True

[exclude_object]

[gcode_arcs]
resolution: 0.1

[idle_timeout]
timeout: 2400

[output_pin PowerOFF]
pin: !PD14 #!PD13
shutdown_value: 1

[input_shaper]

[adxl345]
cs_pin: EBBCan: PB12
spi_software_sclk_pin: EBBCan: PB10
spi_software_mosi_pin: EBBCan: PB11
spi_software_miso_pin: EBBCan: PB2
# axes_map: z,-y,x #SB2240
axes_map: x,y,z  #EBB36

[resonance_tester]
accel_chip: adxl345 #lis2dw
probe_points: 175, 175, 20

[shaketune]
result_folder: ~/printer_data/config/ShakeTune_results
number_of_results_to_keep: 5
keep_raw_csv: False
show_macros_in_webui: True

[fan]
pin: EBBCan: PA1
#max_power: 0.8
kick_start_time: 0.5 #
##  Depending on your fan, you may need to increase this value
##  if your fan will not start. Can change cycle_time (increase)
##  if your fan is not able to slow down effectively
off_below: 0.10 #


[heater_fan hotend_fan]
pin: EBBCan: PA0
fan_speed: 0.45 #0.6 #0.8 #1
kick_start_time: 0.5 #
heater: extruder
heater_temp: 50.0

[heater_fan controller_fan]
pin: PA3
heater: heater_bed
heater_temp: 45.0
max_power: 1.0
shutdown_speed: 1.0
cycle_time: 0.0001     #10 kHz PWM signal
kick_start_time: 0
fan_speed: 0.35

[temperature_fan SoC_fan]
pin: PF7
#pin: RPI:gpio26
kick_start_time: 0.8
off_below: 0.25
max_power: 1.0
sensor_type: temperature_host
control: pid
min_temp: 10
max_temp: 95
pid_kp: 1.0
pid_ki: 0.5
pid_kd: 2.0
min_speed: 0.2
max_speed: 0.9
target_temp: 42

# [temperature_sensor EBBCan] #ebb_ntc
# sensor_type: Generic 3950
# sensor_pin: EBBCan: PA2

[temperature_sensor M8P]
sensor_type: temperature_mcu

[temperature_sensor CB1]
sensor_type: temperature_host

[temperature_sensor chamber]
sensor_type: Generic 3950
sensor_pin: PB0
min_temp: 0
max_temp: 80

[heater_bed]
heater_pin: PA1
sensor_pin: PB1
sensor_type: Generic 3950 #ATC Semitec 104GT-2
min_temp: 0
max_temp: 135

# [fan_generic Nevermore]
# pin: PA5
# heater: heater_bed
# heater_temp: 85



##relative_reference_index: 12


#[safe_z_home]
#home_xy_position: 175, 175
#   Sets the x, y position used for z homing with beacon
#z_hop: 10 #3
#   Retracts the z axis before x, y homing to avoid dragging the nozzle.

#*# <---------------------- SAVE_CONFIG ---------------------->
#*# DO NOT EDIT THIS BLOCK OR BELOW. The contents are auto-generated.
#*#
#*# [heater_bed]
#*# control = pid
#*# pid_kp = 60.630
#*# pid_ki = 2.031
#*# pid_kd = 452.452
#*#
#*# [extruder]
#*# control = pid
#*# pid_kp = 38.343
#*# pid_ki = 12.781
#*# pid_kd = 28.757
#*#
#*# [input_shaper]
#*# shaper_type_x = mzv
#*# shaper_freq_x = 71.8
#*# shaper_type_y = mzv
#*# shaper_freq_y = 49.4
#*#
#*# [scanner]
#*# mode = touch
#*# scanner_touch_threshold = 2500
#*# scanner_touch_speed = 3
#*# scanner_touch_z_offset = 0.040
#*#
#*# [scanner model default]
#*# model_coef = 1.501655349344264,
#*# 	1.8359344072967554,
#*# 	0.7428093377728783,
#*# 	0.2403446832748512,
#*# 	0.41749991778681267,
#*# 	0.6918231366744932,
#*# 	-0.32305870954439037,
#*# 	-0.6973551815463914,
#*# 	0.3108869306784456,
#*# 	0.3803717242199106
#*# model_domain = 3.1767194492951376e-07,3.302051437393238e-07
#*# model_range = 0.200000,5.100000
#*# model_temp = 69.569945
#*# model_offset = 0.00000
#*# model_mode = touch
#*# model_fw_version = CARTOGRAPHER 5.1.0
#*#
#*# [bed_mesh default]
#*# version = 1
#*# points =
#*# 	-0.077430, -0.063516, -0.055493, -0.043683, -0.035508, -0.026943, -0.019413, -0.009992, -0.001979, 0.005549, 0.016106, 0.027144, 0.038237, 0.047455, 0.053374, 0.053290, 0.059271, 0.056204, 0.060693, 0.049102, 0.051791, 0.035165, 0.033029, 0.011894, 0.009723, -0.013776, -0.018269, -0.052917, -0.064710, -0.081938
#*# 	-0.092101, -0.077432, -0.071987, -0.046148, -0.051421, -0.025468, -0.034159, -0.007362, -0.018828, 0.010451, -0.000062, 0.029515, 0.022002, 0.050148, 0.037824, 0.060924, 0.044301, 0.063694, 0.052346, 0.058554, 0.045241, 0.046620, 0.028064, 0.017253, 0.005168, -0.005638, -0.022081, -0.042719, -0.061153, -0.076674
#*# 	-0.080667, -0.068314, -0.056855, -0.044035, -0.029814, -0.017562, -0.004681, -0.000269, 0.011880, 0.018157, 0.029562, 0.037665, 0.050771, 0.056439, 0.067865, 0.063772, 0.072766, 0.064869, 0.073319, 0.061024, 0.067688, 0.049228, 0.053496, 0.027427, 0.031036, 0.004883, -0.004406, -0.031269, -0.036068, -0.053261
#*# 	-0.056693, -0.045869, -0.044802, -0.021073, -0.017918, 0.004199, 0.007020, 0.032811, 0.020958, 0.049001, 0.038405, 0.069866, 0.060661, 0.088769, 0.074224, 0.100506, 0.082715, 0.104893, 0.084104, 0.101935, 0.075669, 0.089947, 0.071295, 0.069523, 0.046320, 0.037983, 0.016850, 0.006521, -0.008780, -0.026616
#*# 	-0.034779, -0.023713, -0.006432, 0.003496, 0.017273, 0.025055, 0.036563, 0.037769, 0.050339, 0.055812, 0.068578, 0.077333, 0.091047, 0.094000, 0.105582, 0.105665, 0.115993, 0.112713, 0.121598, 0.113005, 0.118787, 0.095713, 0.093673, 0.080334, 0.074972, 0.055413, 0.047032, 0.030915, 0.015192, -0.003642
#*# 	-0.035894, -0.022233, -0.008744, 0.002340, 0.011841, 0.022384, 0.019183, 0.038230, 0.039356, 0.056925, 0.057494, 0.087492, 0.077347, 0.106677, 0.095211, 0.120130, 0.103569, 0.128137, 0.107611, 0.125056, 0.104749, 0.111051, 0.089474, 0.102534, 0.074566, 0.080435, 0.057423, 0.050025, 0.020999, 0.001495
#*# 	-0.030314, -0.017550, -0.002636, 0.003861, 0.016631, 0.021381, 0.031908, 0.039557, 0.050543, 0.058796, 0.068479, 0.074073, 0.087410, 0.094043, 0.106614, 0.107404, 0.116141, 0.113412, 0.115268, 0.099583, 0.092810, 0.094157, 0.104494, 0.095688, 0.086706, 0.075445, 0.062265, 0.044725, 0.025773, 0.005130
#*# 	-0.028475, -0.020220, -0.000076, 0.002357, 0.011078, 0.020350, 0.027692, 0.035509, 0.034632, 0.049919, 0.049444, 0.069067, 0.068276, 0.088368, 0.089244, 0.116503, 0.100410, 0.121646, 0.102445, 0.113780, 0.087981, 0.111034, 0.090984, 0.105169, 0.075583, 0.084341, 0.052621, 0.055945, 0.028791, 0.009640
#*# 	-0.039376, -0.030253, -0.010663, -0.006825, 0.006861, 0.011168, 0.023438, 0.027350, 0.038223, 0.042210, 0.053518, 0.061308, 0.074049, 0.080823, 0.093049, 0.097142, 0.102830, 0.100320, 0.104881, 0.099686, 0.100468, 0.097015, 0.092748, 0.086830, 0.080609, 0.077363, 0.058864, 0.051658, 0.026947, 0.006516
#*# 	-0.042454, -0.035125, -0.012246, -0.007566, 0.009460, 0.008957, 0.024897, 0.025187, 0.033801, 0.042360, 0.050484, 0.061542, 0.064314, 0.083191, 0.082812, 0.095597, 0.088178, 0.099703, 0.092943, 0.110610, 0.088418, 0.102915, 0.080058, 0.094204, 0.069512, 0.078963, 0.048998, 0.049021, 0.016253, 0.005714
#*# 	-0.058991, -0.049888, -0.033794, -0.027492, -0.013507, -0.010025, 0.001940, 0.008993, 0.021543, 0.028014, 0.039151, 0.048399, 0.061039, 0.068617, 0.078044, 0.076473, 0.081107, 0.085735, 0.088794, 0.087583, 0.083468, 0.083883, 0.074628, 0.072268, 0.059726, 0.057304, 0.037694, 0.027888, -0.004572, -0.013770
#*# 	-0.092828, -0.086958, -0.065401, -0.067517, -0.046257, -0.043188, -0.025753, -0.022441, -0.007132, -0.003732, 0.014156, 0.017461, 0.029154, 0.039304, 0.047041, 0.049302, 0.043588, 0.055962, 0.050536, 0.058232, 0.046969, 0.052235, 0.039212, 0.047334, 0.023097, 0.029065, 0.001869, -0.002277, -0.032235, -0.043857
#*# 	-0.107019, -0.098050, -0.082501, -0.077821, -0.065664, -0.059224, -0.048338, -0.037672, -0.025430, -0.018275, -0.008042, 0.001659, 0.013524, 0.023888, 0.031285, 0.036424, 0.040608, 0.048057, 0.046209, 0.049690, 0.041548, 0.040281, 0.031768, 0.029237, 0.012078, 0.011094, -0.014103, -0.017278, -0.048077, -0.059685
#*# 	-0.110733, -0.106939, -0.085200, -0.088371, -0.067873, -0.071016, -0.045752, -0.049140, -0.021850, -0.020784, -0.005284, -0.004364, 0.012718, 0.016362, 0.030466, 0.030132, 0.034869, 0.041805, 0.042492, 0.039603, 0.027968, 0.030169, 0.016848, 0.016833, -0.000231, 0.003419, -0.022138, -0.026864, -0.056194, -0.066866
#*# 	-0.117733, -0.112846, -0.099361, -0.091320, -0.081974, -0.074529, -0.064465, -0.052318, -0.040345, -0.030949, -0.023982, -0.014906, -0.004432, 0.005533, 0.010960, 0.016953, 0.023178, 0.029990, 0.029964, 0.030064, 0.021011, 0.022216, 0.011623, 0.007718, -0.009779, -0.011131, -0.033056, -0.040084, -0.066785, -0.077813
#*# 	-0.129129, -0.122599, -0.103583, -0.103718, -0.085286, -0.089021, -0.067556, -0.070588, -0.046177, -0.047596, -0.025471, -0.030079, -0.003635, -0.003367, 0.008532, 0.006454, 0.017843, 0.015926, 0.026586, 0.017889, 0.015008, 0.010564, -0.001686, -0.005478, -0.021926, -0.028884, -0.047100, -0.057116, -0.079583, -0.091848
#*# 	-0.129305, -0.121493, -0.109762, -0.102825, -0.093725, -0.086027, -0.075495, -0.064629, -0.055698, -0.045486, -0.034430, -0.023863, -0.014288, -0.006111, 0.000428, 0.005011, 0.007664, 0.012533, 0.015215, 0.016593, 0.011164, 0.010613, -0.002516, -0.006923, -0.023606, -0.031373, -0.051788, -0.061532, -0.085171, -0.099645
#*# 	-0.135506, -0.130211, -0.113374, -0.113703, -0.096973, -0.098629, -0.075968, -0.077153, -0.056165, -0.057783, -0.034597, -0.037778, -0.015024, -0.020093, -0.000436, -0.001515, 0.007594, 0.004284, 0.012661, 0.005686, 0.008394, -0.001779, -0.008363, -0.017523, -0.028820, -0.042002, -0.060499, -0.074452, -0.095728, -0.110023
#*# 	-0.153192, -0.144229, -0.134878, -0.125113, -0.115537, -0.105223, -0.095119, -0.086087, -0.074659, -0.063883, -0.054627, -0.043761, -0.034648, -0.026776, -0.021061, -0.016811, -0.013109, -0.009521, -0.007763, -0.009101, -0.014367, -0.016264, -0.026499, -0.033855, -0.046831, -0.055333, -0.073855, -0.089890, -0.108516, -0.120769
#*# 	-0.165255, -0.160068, -0.149388, -0.142143, -0.125666, -0.121121, -0.097052, -0.097843, -0.077063, -0.078654, -0.057199, -0.061381, -0.039626, -0.043676, -0.026393, -0.037250, -0.019656, -0.027484, -0.014463, -0.021168, -0.019905, -0.030962, -0.034843, -0.048772, -0.055041, -0.071784, -0.086947, -0.104185, -0.119234, -0.132556
#*# 	-0.146342, -0.139568, -0.130921, -0.118877, -0.108006, -0.096688, -0.083758, -0.071588, -0.062668, -0.054123, -0.045730, -0.038383, -0.030655, -0.023397, -0.016793, -0.013281, -0.008582, -0.005963, -0.004238, -0.005176, -0.011374, -0.014926, -0.025590, -0.034558, -0.047087, -0.059023, -0.076329, -0.092792, -0.107719, -0.119393
#*# 	-0.118003, -0.109445, -0.099723, -0.094568, -0.081214, -0.073732, -0.056772, -0.047694, -0.035080, -0.031751, -0.012960, -0.013735, 0.003563, -0.000624, 0.016480, 0.011146, 0.025618, 0.018359, 0.030756, 0.019416, 0.023804, 0.008638, 0.006271, -0.007182, -0.016367, -0.033518, -0.049003, -0.067449, -0.079509, -0.096112
#*# 	-0.100263, -0.092475, -0.083367, -0.074489, -0.064089, -0.053224, -0.038470, -0.028284, -0.015945, -0.008374, 0.002222, 0.009877, 0.019340, 0.024030, 0.030488, 0.033196, 0.039140, 0.041747, 0.044056, 0.040662, 0.035183, 0.027479, 0.018224, 0.006757, -0.006704, -0.020857, -0.037589, -0.053902, -0.069029, -0.082137
#*# 	-0.100869, -0.091336, -0.084403, -0.074069, -0.062943, -0.050335, -0.037736, -0.027671, -0.014795, -0.009020, 0.003477, 0.006145, 0.017970, 0.020169, 0.032877, 0.029783, 0.043072, 0.037373, 0.044633, 0.034942, 0.034456, 0.022581, 0.017500, 0.003561, -0.005524, -0.022163, -0.037311, -0.053768, -0.067487, -0.082000
#*# 	-0.100486, -0.091951, -0.083332, -0.074303, -0.063886, -0.053124, -0.036932, -0.026819, -0.014522, -0.007435, 0.003694, 0.008138, 0.016312, 0.019049, 0.025209, 0.029032, 0.034794, 0.036375, 0.036995, 0.032588, 0.026120, 0.017360, 0.009330, -0.001122, -0.011911, -0.024020, -0.039478, -0.055705, -0.071484, -0.084462
#*# 	-0.088586, -0.079035, -0.072007, -0.062700, -0.055304, -0.039526, -0.030206, -0.017174, -0.007241, 0.001122, 0.009022, 0.012034, 0.021987, 0.022730, 0.030315, 0.031477, 0.041789, 0.038250, 0.043931, 0.033399, 0.031927, 0.020316, 0.015250, 0.002331, -0.006004, -0.020067, -0.034185, -0.051469, -0.067816, -0.083417
#*# 	-0.083267, -0.076993, -0.067689, -0.058299, -0.048838, -0.039852, -0.025868, -0.017303, -0.005553, 0.000041, 0.011033, 0.015134, 0.023832, 0.027576, 0.033560, 0.036230, 0.040889, 0.042097, 0.039831, 0.036270, 0.030949, 0.023234, 0.015540, 0.005469, -0.006474, -0.019994, -0.036778, -0.053092, -0.069584, -0.084041
#*# 	-0.089605, -0.083449, -0.076603, -0.063179, -0.057480, -0.044488, -0.038583, -0.023884, -0.016336, -0.003694, 0.002015, 0.009716, 0.015234, 0.020088, 0.023956, 0.026017, 0.031407, 0.031636, 0.033786, 0.027020, 0.025964, 0.015347, 0.009734, -0.002182, -0.014127, -0.028945, -0.045763, -0.060210, -0.075290, -0.091260
#*# 	-0.093490, -0.086940, -0.077189, -0.070893, -0.060035, -0.054014, -0.038849, -0.032837, -0.020140, -0.013431, -0.003138, 0.003085, 0.010437, 0.012136, 0.018033, 0.019682, 0.020905, 0.022313, 0.022118, 0.019367, 0.013989, 0.008138, 0.000372, -0.009140, -0.023425, -0.038018, -0.053023, -0.067396, -0.081026, -0.097462
#*# 	-0.088844, -0.080431, -0.069925, -0.054336, -0.049031, -0.038083, -0.032669, -0.018322, -0.013389, -0.003663, 0.000172, 0.009491, 0.012888, 0.018411, 0.018725, 0.021154, 0.021708, 0.019729, 0.022896, 0.018440, 0.016026, 0.007960, -0.001469, -0.013299, -0.025095, -0.039102, -0.053894, -0.066180, -0.079998, -0.096059
#*# x_count = 30
#*# y_count = 30
#*# mesh_x_pps = 2
#*# mesh_y_pps = 2
#*# algo = bicubic
#*# tension = 0.2
#*# min_x = 40.0
#*# max_x = 310.0
#*# min_y = 40.0
#*# max_y = 310.0
